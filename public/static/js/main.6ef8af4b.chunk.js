(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{15:function(e,t,a){e.exports=a.p+"static/media/popup_fail.c32299fa.svg"},20:function(e,t,a){e.exports=a.p+"static/media/logo.fd84953f.svg"},23:function(e,t,a){e.exports=a.p+"static/media/popup_success.7fc4c149.svg"},26:function(e,t,a){e.exports=a(37)},31:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(18),c=a.n(r),i=a(7),l=(a(31),a(24)),s=a(1),m=a(2),u=a(25),p=function(e){var t=e.component,a=Object(u.a)(e,["component"]);return o.a.createElement(m.b,null,(function(){return a.loggedIn?o.a.createElement(t,a):o.a.createElement(m.a,{to:"./sign-in"})}))},f="https://auth.nomoreparties.co",d=a(20),_=a.n(d),h=function(e){var t=Object(m.g)(),a=o.a.useState(""),r=Object(s.a)(a,2),c=r[0],l=r[1];return Object(n.useEffect)((function(){return e.loggedIn?l("header__link header__link_loggedIn"):l("header__link")}),[e.loggedIn]),o.a.createElement("nav",{className:"header__navbar"},o.a.createElement("ul",{className:"header__nav"},e.loggedIn?o.a.createElement("li",{className:"header__item"},e.email):null,o.a.createElement("li",{className:"header__item"}," ",o.a.createElement(i.b,{to:e.buttonLink},o.a.createElement("button",{onClick:function(){e.loggedIn&&(e.onSignOut(),localStorage.removeItem("jwt"),t.push("/sign-in"))},className:c},e.buttonText)))))};var E=function(e){return o.a.createElement("div",{className:"header"},o.a.createElement("img",{alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f \u043f\u0440\u043e\u0435\u043a\u0442\u0430",src:_.a,className:"header__logo"}),o.a.createElement(m.d,null,o.a.createElement(p,{exact:!0,path:"/",component:h,loggedIn:e.loggedIn,buttonText:"\u0412\u044b\u0439\u0442\u0438",buttonLink:"",email:e.email,onSignOut:e.onSignOut}),o.a.createElement(m.b,{path:"/sign-in"},o.a.createElement(h,{loggedIn:e.loggedIn,buttonText:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",buttonLink:"/sign-up",email:e.email,onSignOut:e.onSignOut})),o.a.createElement(m.b,{path:"/sign-up"},o.a.createElement(h,{loggedIn:e.loggedIn,buttonText:"\u0412\u043e\u0439\u0442\u0438",buttonLink:"/sign-in",email:e.email,onSignOut:e.onSignOut}))))};var b=function(){return o.a.createElement("div",{className:"footer"},o.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Mesto Russia"))};var v=function(e){return o.a.createElement("div",{className:"element__bubble"},o.a.createElement("p",{className:"element__bubble-text"},e.likesInfo.length>0?"\u041f\u043e\u043d\u0440\u0430\u0432\u0438\u043b\u043e\u0441\u044c:".concat(e.likesInfo.map((function(e){return" "+e.name}))):"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u044d\u0442\u043e \u0444\u043e\u0442\u043e \u0435\u0449\u0451 \u043d\u0438\u043a\u0442\u043e \u043d\u0435 \u043e\u0446\u0435\u043d\u0438\u043b"))},g=o.a.createContext(),N=o.a.createContext();var O=function(e){var t=o.a.useState(!1),a=Object(s.a)(t,2),n=a[0],r=a[1],c=o.a.useContext(g),i=o.a.useContext(N),l=e.card,m=l.owner._id===c._id,u=l.likes.some((function(e){return e._id===c._id})),p="element__like ".concat(u?"":"element__like_black");function f(){r(!n)}return o.a.createElement("div",{className:"element"},m&&o.a.createElement("button",{type:"submit",className:"element__trash",onClick:function(){e.onTrashClick(e.card)}}),o.a.createElement("img",{alt:l.name,className:"element__picture",src:l.link,onClick:function(){e.onCardClick(e.card)}}),o.a.createElement("div",{className:"element__data"},n&&o.a.createElement(v,{likesInfo:l.likes}),o.a.createElement("h3",{className:"element__place"},l.name),o.a.createElement("div",{className:"element__info"},o.a.createElement("button",{type:"submit",className:p,onMouseEnter:f,onMouseLeave:f,onClick:function(){e.onCardLike(e.card)},disabled:i}),o.a.createElement("p",{className:"element__likes"},l.likes.length))))},C=function(){return o.a.createElement("div",{className:"loader"},o.a.createElement("div",null),o.a.createElement("div",null))},k=o.a.createContext();var j=function(e){var t=o.a.useContext(g),a=o.a.useContext(k);return o.a.createElement("div",{className:"content"},o.a.createElement("section",{className:"profile"},o.a.createElement("div",{className:"profile__avatar-edit",onClick:e.onEditAvatar},o.a.createElement("img",{src:t.avatar,alt:"\u0444\u043e\u0442\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",className:"profile__avatar"})),o.a.createElement("div",{className:"profile__info"},o.a.createElement("h1",{className:"profile__name"},t.name),o.a.createElement("button",{type:"button","aria-label":"\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",className:"profile__edit-button",onClick:e.onEditProfile}),o.a.createElement("p",{className:"profile__vocation"},t.about)),o.a.createElement("button",{type:"button","aria-label":"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e",className:"profile__add-button",onClick:e.onAddPlace})),a&&o.a.createElement(C,null),o.a.createElement("section",{className:"elements","aria-label":"\u0441\u0435\u043a\u0446\u0438\u044f \u0441 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f\u043c\u0438"},e.cards.map((function(t){return o.a.createElement(O,{card:t,onCardClick:e.onCardClick,key:t._id,onTrashClick:e.onTrashClick,onCardLike:e.onCardLike})}))))};var S=function(e){return o.a.createElement("div",{className:"auth auth_".concat(e.name)},o.a.createElement("form",{name:e.name,action:"#",method:"POST",className:"auth__container",noValidate:!0,onSubmit:e.onSubmit},o.a.createElement("h2",{className:"auth__title"},e.title),e.children))},y=function(e){var t=e.onAuth,a=Object(n.useState)(""),r=Object(s.a)(a,2),c=r[0],l=r[1],u=Object(n.useState)(""),p=Object(s.a)(u,2),f=p[0],d=p[1],_=Object(n.useState)(""),h=Object(s.a)(_,2),E=(h[0],h[1]),b=Object(m.g)(),v=o.a.useContext(N);var g=function(){l(""),d(""),E("")};return o.a.createElement(S,{name:"login",title:"\u0412\u0445\u043e\u0434",onSubmit:function(e){e.preventDefault(),c&&f&&t(f,c).then((function(){return g})).then((function(){return b.push("/")})).catch((function(e){return E(e||"\u041d\u0435\u0443\u0434\u0430\u0447\u043d\u043e")}))}},o.a.createElement("fieldset",{className:"popup__form-item"},o.a.createElement("div",{className:"popup__form-element"},o.a.createElement("input",{id:"email-input",type:"email",name:"email",className:"popup__form-item-field popup__form-item-field_invert popup__form-item-field_email",placeholder:"Email",value:c||"",onChange:function(e){l(e.target.value)},minLength:"4",maxLength:"30",autoComplete:"off",required:!0}),o.a.createElement("span",{id:"email-input-error",className:"popup__form-item popup__form-item_error"})),o.a.createElement("div",{className:"popup__form-element"},o.a.createElement("input",{id:"password-input",type:"password",name:"password",className:"popup__form-item-field popup__form-item-field_invert popup__form-item-field_password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:f||"",onChange:function(e){d(e.target.value)},autoComplete:"on",required:!0}),o.a.createElement("span",{id:"password-input-error",className:"popup__form-item popup__form-item_error"}))),o.a.createElement("button",{type:"submit",className:"popup__save-button popup__save-button_invert"},v?"\u0417\u0430\u0445\u043e\u0434\u0438\u043c...":"\u0412\u043e\u0439\u0442\u0438"),o.a.createElement("div",{className:"auth__signup"},o.a.createElement("p",{className:"auth__form-item"},"\u0415\u0449\u0451 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"),o.a.createElement(i.b,{to:"/sign-up",className:"auth__form-item auth__form-item_link"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))},x=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)(""),u=Object(s.a)(l,2),p=u[0],d=u[1],_=o.a.useContext(N),h=Object(m.g)();return o.a.createElement(S,{name:"registration",title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",onSubmit:function(t){t.preventDefault(),function(e,t){return fetch("".concat(f,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){try{return 200===e.status?e.json():e}catch(t){return t}})).then((function(e){return e})).catch((function(e){return console.log(e)}))}(r,p).then((function(t){if(400===t.status)throw new Error("Something went wrong");e.onSuccessfulRegister(),h.push("/sign-in/")})).catch((function(t){console.log(t),e.onFailedRegister()}))}},o.a.createElement("fieldset",{className:"popup__form-item"},o.a.createElement("div",{className:"popup__form-element"},o.a.createElement("input",{id:"email-input",type:"email",name:"email",className:"popup__form-item-field popup__form-item-field_invert popup__form-item-field_email",placeholder:"Email",value:r||"",onChange:function(e){c(e.target.value)},minLength:"1",maxLength:"30",autoComplete:"off",required:!0}),o.a.createElement("span",{id:"email-input-error",className:"popup__form-item popup__form-item_error"})),o.a.createElement("div",{className:"popup__form-element"},o.a.createElement("input",{id:"password-input",type:"password",name:"password",className:"popup__form-item-field popup__form-item-field_invert popup__form-item-field_password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:p||"",onChange:function(e){d(e.target.value)},autoComplete:"on",required:!0}),o.a.createElement("span",{id:"password-input-error",className:"popup__form-item popup__form-item_error"}))),o.a.createElement("button",{type:"submit",className:"popup__save-button popup__save-button_invert"},_?"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f...":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),o.a.createElement("div",{className:"auth__signup"},o.a.createElement("p",{className:"auth__form-item"},"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"),o.a.createElement(i.b,{to:"/sign-in",className:"auth__form-item auth__form-item_link"},"\u0412\u043e\u0439\u0442\u0438")))};var w=function(e){return o.a.createElement("div",{className:"popup popup_".concat(e.name," ").concat(e.isOpen&&"popup_opened")},o.a.createElement("form",{name:e.name,action:"#",method:"POST",className:"popup__form-container",noValidate:!0,onSubmit:e.onSubmit},o.a.createElement("button",{type:"button",className:"popup__close-button",onClick:e.onClose}),o.a.createElement("h2",{className:"popup__title"},e.title),e.children))};var L=function(e){var t=o.a.useContext(N);return o.a.createElement(w,{name:"confirm",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onConfirm(e.card)}},o.a.createElement("button",{type:"submit",className:"popup__delete-button"},t?"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...":"\u0414\u0430"))};var I=function(e){return o.a.createElement("div",{className:"popup popup__preview popup_dark-background ".concat(e.isOpen&&"popup_opened")},o.a.createElement("div",{className:"popup__image-container"},o.a.createElement("button",{type:"button",className:"popup__close-button",onClick:e.onClose}),o.a.createElement("img",{className:"popup__image",src:e.card?e.card.link:"",alt:e.card?e.card.name:""}),o.a.createElement("p",{className:"popup__image-caption"},e.card.name)))};var T=function(e){var t=o.a.useState(""),a=Object(s.a)(t,2),n=a[0],r=a[1],c=o.a.useState(""),i=Object(s.a)(c,2),l=i[0],m=i[1],u=o.a.useContext(g),p=o.a.useContext(N);return o.a.useEffect((function(){r(u.name),m(u.about)}),[u]),o.a.createElement(w,{name:"profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:n,about:l})}},o.a.createElement("fieldset",{className:"popup__form-item"},o.a.createElement("div",{className:"popup__form-element"},o.a.createElement("input",{id:"name-input",type:"text",name:"name",className:"popup__form-item-field popup__form-item-field_name",placeholder:"\u0418\u043c\u044f",value:n||"",onChange:function(e){r(e.target.value)},minLength:"2",maxLength:"40",autoComplete:"off",required:!0}),o.a.createElement("span",{id:"name-input-error",className:"popup__form-item popup__form-item_error"})),o.a.createElement("div",{className:"popup__form-element"},o.a.createElement("input",{id:"vocation-input",type:"text",name:"vocation",className:"popup__form-item-field popup__form-item-field_vocation",placeholder:"\u041e \u0441\u0435\u0431\u0435",value:l||"",onChange:function(e){m(e.target.value)},minLength:"2",maxLength:"200",autoComplete:"off",required:!0}),o.a.createElement("span",{id:"vocation-input-error",className:"popup__form-item popup__form-item_error"}))),o.a.createElement("button",{type:"submit",className:"popup__save-button"},p?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))};var U=function(e){var t=o.a.useRef(),a=o.a.useContext(N);return o.a.createElement(w,{name:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(a){a.preventDefault(),e.onUpdateAvatar({avatar:t.current.value})}},o.a.createElement("fieldset",{className:"popup__form-item"},o.a.createElement("div",{className:"popup__form-element"},o.a.createElement("input",{id:"avatar-input",type:"url",name:"avatar",className:"popup__form-item-field popup__form-item-field_avatar",placeholder:"\u041d\u043e\u0432\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430",ref:t,autoComplete:"on",required:!0}),o.a.createElement("span",{id:"avatar-input-error",className:"popup__form-item popup__form-item_error"}))),o.a.createElement("button",{type:"submit",className:"popup__save-button"},a?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))};var P=function(e){var t=o.a.useState(""),a=Object(s.a)(t,2),n=a[0],r=a[1],c=o.a.useState(""),i=Object(s.a)(c,2),l=i[0],m=i[1],u=o.a.useContext(N);return o.a.useEffect((function(){r(""),m("")}),[e.isOpen]),o.a.createElement(w,{name:"place",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onAddPlace({name:n,link:l})}},o.a.createElement("fieldset",{className:"popup__form-item"},o.a.createElement("div",{className:"popup__form-element"},o.a.createElement("input",{id:"place-input",type:"text",name:"name",className:"popup__form-item-field popup__form-item-field_place",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:n||"",onChange:function(e){r(e.target.value)},minLength:"1",maxLength:"30",autoComplete:"off",required:!0}),o.a.createElement("span",{id:"place-input-error",className:"popup__form-item popup__form-item_error"})),o.a.createElement("div",{className:"popup__form-element"},o.a.createElement("input",{id:"link-input",type:"url",name:"link",className:"popup__form-item-field popup__form-item-field_link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430",value:l||"",onChange:function(e){m(e.target.value)},autoComplete:"on",required:!0}),o.a.createElement("span",{id:"link-input-error",className:"popup__form-item popup__form-item_error"}))),o.a.createElement("button",{type:"submit",className:"popup__save-button"},u?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))};var A=function(e){return o.a.createElement(w,{name:"infoTooltip",title:"",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(e){e.preventDefault()}},o.a.createElement("div",{className:"popup__info"},o.a.createElement("img",{alt:e.mess.text,src:e.mess.sign,className:"popup__sign"}),o.a.createElement("p",{className:"popup__title popup__title_message"},e.mess.text)))},R=a(21),D=a(22),q=new(function(){function e(t){var a=t.baseUrl,n=t.headers,o=void 0===n?{}:n;Object(R.a)(this,e),this.baseUrl=a,this.headers=o}return Object(D.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():(console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430"),Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status)))}},{key:"getDefaultUserInfo",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{method:"GET",headers:this.headers}).then(this._handleResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this.baseUrl,"/cards"),{method:"GET",headers:this.headers}).then(this._handleResponse)}},{key:"createCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers,method:"POST",body:JSON.stringify({name:e.name,link:e.link})}).then(this._handleResponse)}},{key:"editUser",value:function(e){return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._handleResponse)}},{key:"changeLikeCardStatus",value:function(e,t){return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:t?"PUT":"DELETE",headers:this.headers}).then(this._handleResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this.headers}).then(this._handleResponse)}},{key:"updateAvatar",value:function(e){return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:e})}).then(this._handleResponse)}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-13",headers:{authorization:"f6237ee0-2461-4ab8-bf1b-c4683cc19aa7","Content-Type":"application/json"}}),J=a(23),M=a.n(J),B=a(15),G=a.n(B);var z=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),i=Object(s.a)(c,2),u=i[0],d=i[1],_=Object(n.useState)(!1),h=Object(s.a)(_,2),v=h[0],O=h[1],C=Object(n.useState)(!1),S=Object(s.a)(C,2),w=S[0],R=S[1],D=Object(n.useState)(!1),J=Object(s.a)(D,2),B=J[0],z=J[1],F=Object(n.useState)(!1),H=Object(s.a)(F,2),V=H[0],W=H[1],$=Object(n.useState)({}),K=Object(s.a)($,2),Q=K[0],X=K[1],Y=Object(n.useState)([]),Z=Object(s.a)(Y,2),ee=Z[0],te=Z[1],ae=Object(n.useState)(!1),ne=Object(s.a)(ae,2),oe=ne[0],re=ne[1],ce=Object(n.useState)(!0),ie=Object(s.a)(ce,2),le=ie[0],se=ie[1],me=Object(n.useState)({sign:G.a,text:""}),ue=Object(s.a)(me,2),pe=ue[0],fe=ue[1],de=Object(n.useState)({}),_e=Object(s.a)(de,2),he=_e[0],Ee=_e[1],be=Object(n.useState)(!1),ve=Object(s.a)(be,2),ge=ve[0],Ne=ve[1],Oe=Object(n.useState)({}),Ce=Object(s.a)(Oe,2),ke=Ce[0],je=Ce[1],Se=Object(m.g)(),ye=function(){var e,t=localStorage.getItem("jwt");t&&(e=t,fetch("".concat(f,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){return e}))).then((function(e){e&&(401===e?localStorage.removeItem(t):(Ne(!0),je({email:e.data.email}),Se.push("/")))})).catch((function(){return console.log({message:"\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435"})}))};function xe(){O(!1),r(!1),d(!1),R(!1),z(!1),W(!1),Ee({})}return Object(n.useEffect)((function(){return ye()}),[]),o.a.useEffect((function(){Promise.all([q.getDefaultUserInfo(),q.getInitialCards()]).then((function(e){X(e[0]),te(e[1])})).finally((function(){se(!1)})).catch((function(e){console.log(e)}))}),[]),o.a.useEffect((function(){function e(e){"Escape"===e.key&&xe()}function t(e){e.target.classList.contains("popup_opened")&&xe()}return document.addEventListener("keydown",e),document.addEventListener("click",t),function(){document.removeEventListener("keydown",e),document.removeEventListener("click",t)}})),o.a.createElement("div",{className:"page"},o.a.createElement(k.Provider,{value:le},o.a.createElement(N.Provider,{value:oe},o.a.createElement(g.Provider,{value:Q},o.a.createElement(E,{onSignOut:function(){Ne(!1)},email:ke.email,loggedIn:ge}),o.a.createElement(m.d,null,o.a.createElement(p,{exact:!0,path:"/",loggedIn:ge,component:j,onEditAvatar:function(){O(!0)},onEditProfile:function(){r(!0)},onAddPlace:function(){d(!0)},onCardClick:function(e){Ee(e),R(!0)},onTrashClick:function(e){Ee(e),z(!0)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===Q._id}));re(!0),q.changeLikeCardStatus(e._id,!t).then((function(t){var a=ee.map((function(a){return a._id===e._id?t:a}));te(a)})).finally((function(){re(!1)})).catch((function(e){console.log(e)}))},cards:ee}),o.a.createElement(m.b,{path:"/sign-in"},o.a.createElement(y,{onAuth:function(e,t){return function(e,t){return fetch("".concat(f,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:e,email:t})}).then((function(e){return e.json()})).then((function(e){if(e.token)return localStorage.setItem("jwt",e.token),e.token;throw new Error("wrong!")})).catch((function(e){return console.log(e)}))}(e,t).then((function(e){if(!e)throw new Error({message:"\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435"});ye()})).catch((function(e){return console.log(e)}))}})),o.a.createElement(m.b,{path:"/sign-up"},o.a.createElement(x,{onSuccessfulRegister:function(){fe({sign:M.a,text:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"}),W(!0)},onFailedRegister:function(){fe({sign:G.a,text:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."}),W(!0)}})),o.a.createElement(m.b,null,ge?o.a.createElement(m.a,{to:"/"}):o.a.createElement(m.a,{to:"/sign-in"}))),o.a.createElement(b,null),o.a.createElement("section",{className:"popups"},o.a.createElement(U,{isOpen:v,onClose:xe,onUpdateAvatar:function(e){re(!0),q.updateAvatar(e.avatar).then((function(e){X(e)})).finally((function(){xe(),re(!1)})).catch((function(e){console.log(e)}))}}),o.a.createElement(T,{isOpen:a,onClose:xe,onUpdateUser:function(e){re(!0),q.editUser(e).then((function(e){X(e)})).finally((function(){xe(),re(!1)})).catch((function(e){console.log(e)}))}}),o.a.createElement(P,{isOpen:u,onClose:xe,onAddPlace:function(e){re(!0),q.createCard(e).then((function(e){te([].concat(Object(l.a)(ee),[e]))})).finally((function(){xe(),re(!1)})).catch((function(e){console.log(e)}))}}),o.a.createElement(L,{isOpen:B,onClose:xe,card:he,onConfirm:function(e){re(!0),q.deleteCard(e._id).then((function(){te(ee.filter((function(t){return t._id!==e._id})))})).finally((function(){xe(),re(!1)})).catch((function(e){console.log(e)}))}}),o.a.createElement(A,{isOpen:V,onClose:xe,mess:pe}),o.a.createElement(I,{isOpen:w,card:he,onClose:xe}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(i.a,null,o.a.createElement(z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.6ef8af4b.chunk.js.map