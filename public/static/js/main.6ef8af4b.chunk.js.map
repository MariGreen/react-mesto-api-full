{"version":3,"sources":["images/popup_fail.svg","images/logo.svg","images/popup_success.svg","components/ProtectedRoute.js","utils/auth.js","components/NavBar.js","components/Header.js","components/Footer.js","components/HoverLikes.js","contexts/CurrentUserContext.js","contexts/LoadingContext.js","components/Card.js","components/Loader.js","contexts/InitialLoadingContext.js","components/Main.js","components/Authorization.js","components/Login.js","components/Register.js","components/PopupWithForm.js","components/ConfirmPopup.js","components/PopupWithImage.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/InfoTooltip.js","utils/Api.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","ProtectedRoute","Component","component","props","loggedIn","to","BASE_URL","NavBar","history","useHistory","React","useState","buttonClassName","setButtonClassName","useEffect","className","email","buttonLink","onClick","onSignOut","localStorage","removeItem","push","buttonText","Header","alt","src","headerLogo","exact","path","Navbar","Footer","HoverLikes","likesInfo","length","map","item","name","CurrentUserContext","createContext","LoadingContext","Card","isHoverLikesVisible","setIsHoverLikesVisible","currentUser","useContext","loading","card","isOwn","owner","_id","isLiked","likes","some","i","cardLikeButtonClassName","handleMouseToggle","type","onTrashClick","link","onCardClick","onMouseEnter","onMouseLeave","onCardLike","disabled","InitialLoadingContext","Main","initialLoading","onEditAvatar","avatar","aria-label","onEditProfile","about","onAddPlace","Loader","cards","key","Authorization","action","method","noValidate","onSubmit","title","children","Login","onAuth","setEmail","password","setPassword","setMessage","resetForm","evt","preventDefault","then","catch","err","id","placeholder","value","onChange","target","minLength","maxLength","autoComplete","required","Register","fetch","headers","Accept","body","JSON","stringify","response","status","json","res","console","log","auth","Error","onSuccessfulRegister","onFailedRegister","PopupWithForm","isOpen","onClose","ConfirmPopup","onConfirm","PopupWithImage","EditProfilePopup","setName","description","setDescription","onUpdateUser","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","ref","AddPlacePopup","setLink","InfoTooltip","mess","text","sign","api","baseUrl","this","ok","Promise","reject","_handleResponse","data","cardId","authorization","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","isConfirmPopupOpen","setIsConfirmPopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","setCurrentUser","setCards","setLoading","setInitialLoading","failedSign","message","selectedCard","setSelectedCard","setLoggedIn","userData","setUserData","tokenCheck","token","jwt","getItem","closeAllPopups","all","getDefaultUserInfo","getInitialCards","finally","handleEscClose","closeByOverlayClick","classList","contains","document","addEventListener","removeEventListener","Provider","changeLikeCardStatus","newCard","newCards","c","setItem","successSign","updateAvatar","user","editUser","createCard","deleteCard","filter","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","error"],"mappings":"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","file":"static/js/main.6ef8af4b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/popup_fail.c32299fa.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.fd84953f.svg\";","module.exports = __webpack_public_path__ + \"static/media/popup_success.7fc4c149.svg\";","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\r\n      }\r\n    </Route>\r\n)}\r\n\r\nexport default ProtectedRoute;","export const BASE_URL = 'https://auth.nomoreparties.co';\r\n\r\nexport const register = (email, password ) => fetch(`${BASE_URL}/signup`, {\r\n  method: 'POST',\r\n  headers: {\r\n    Accept: 'application/json',\r\n    'Content-Type': 'application/json',\r\n  },\r\n  body: JSON.stringify({ email, password }),\r\n})\r\n  .then((response) => {\r\n    try {\r\n      if (response.status === 200){\r\n        return response.json();\r\n      }\r\n      else {\r\n        return response;\r\n      };\r\n    } catch(err){\r\n      return (err)\r\n    }\r\n  })\r\n  .then((res) => {\r\n    return res;\r\n  })\r\n  .catch((err) => console.log(err));\r\n\r\n  export const authorize = (password, email) => fetch(`${BASE_URL}/signin`, {\r\n  method: 'POST',\r\n  headers: {\r\n    Accept: 'application/json',\r\n    'Content-Type': 'application/json',\r\n  },\r\n  body: JSON.stringify({ password, email }),\r\n})\r\n  .then(((response) => response.json()))\r\n  .then((data) => {\r\n    if (data.token) {\r\n      localStorage.setItem('jwt', data.token);\r\n      return data.token;\r\n    } else {\r\n      throw new Error('wrong!');\r\n    }\r\n  })\r\n  .catch((err) => console.log(err));\r\n\r\n  export const getContent = (token) => fetch(`${BASE_URL}/users/me`, {\r\n  method: 'GET',\r\n  headers: {\r\n    Accept: 'application/json',\r\n    'Content-Type': 'application/json',\r\n    Authorization: `Bearer ${token}`,\r\n  },\r\n})\r\n  .then((res) => res.json())\r\n  .then((data) => data)\r\n  \r\n\r\n\r\n","import React, { useEffect } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\n\r\n\r\nconst NavBar = (props) => {  \r\n  const history = useHistory();\r\n  const [buttonClassName, setButtonClassName] = React.useState('');\r\n\r\n  useEffect(() => props.loggedIn ? setButtonClassName('header__link header__link_loggedIn') : setButtonClassName('header__link'), [props.loggedIn])\r\n  \r\n\r\n  function signOut() {\r\n    if (props.loggedIn) {\r\n      props.onSignOut();\r\n      localStorage.removeItem('jwt');\r\n      history.push('/sign-in');\r\n    }\r\n  }\r\n     \r\n \r\n  return (\r\n    <nav className='header__navbar'>\r\n      <ul className='header__nav' >\r\n      {props.loggedIn? <li className='header__item'>{props.email}</li> : null}\r\n        <li className='header__item'> <Link to ={props.buttonLink}>\r\n          <button onClick={signOut} className={buttonClassName}>{props.buttonText}</button></Link></li>\r\n  \r\n      </ul>\r\n  \r\n    </nav>\r\n  )\r\n}\r\n\r\n\r\n\r\nexport default NavBar","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport headerLogo from '../images/logo.svg';\r\nimport Navbar from './NavBar';\r\nimport ProtectedRoute from './ProtectedRoute';\r\n\r\nfunction Header(props) {  \r\n  return (\r\n    <div className=\"header\">\r\n      <img alt=\"логотип проекта\" src={headerLogo} className=\"header__logo\" />\r\n      <Switch>\r\n        <ProtectedRoute exact path='/' component={Navbar} loggedIn={props.loggedIn} buttonText='Выйти' buttonLink='' email={props.email} onSignOut={props.onSignOut}/>\r\n\r\n        <Route path='/sign-in' >\r\n          <Navbar loggedIn={props.loggedIn} buttonText='Регистрация' buttonLink='/sign-up' email={props.email} onSignOut={props.onSignOut}/>\r\n        </Route>\r\n\r\n        <Route path='/sign-up' >\r\n          <Navbar loggedIn={props.loggedIn} buttonText='Войти' buttonLink='/sign-in' email={props.email} onSignOut={props.onSignOut}/>\r\n        </Route>\r\n      {/* <p className='header__link'>Войти</p> */}\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <div className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\n\r\nfunction HoverLikes(props) {\r\n  return (\r\n    <div className=\"element__bubble\">\r\n      <p className=\"element__bubble-text\">\r\n        {props.likesInfo.length > 0\r\n          ? `Понравилось:${props.likesInfo.map((item) => {\r\n              return ' ' + item.name;\r\n            })}`\r\n          : `К сожалению, это фото ещё никто не оценил`}\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HoverLikes;\r\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import React from 'react';\r\n\r\nexport const LoadingContext = React.createContext();\r\n","import React from 'react';\r\nimport HoverLikes from './HoverLikes';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { LoadingContext } from '../contexts/LoadingContext';\r\n\r\nfunction Card(props) {\r\n  const [isHoverLikesVisible, setIsHoverLikesVisible] = React.useState(false);\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const loading = React.useContext(LoadingContext);\r\n\r\n  const { card } = props;\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const isLiked = card.likes.some((i) => i._id === currentUser._id);\r\n  const cardLikeButtonClassName = `element__like ${isLiked ? '' : 'element__like_black'}`;\r\n\r\n  function handleClick() {\r\n    props.onCardClick(props.card);\r\n  }\r\n\r\n  function handleTrashClick() {\r\n    props.onTrashClick(props.card);\r\n  }\r\n\r\n  function handleLike() {\r\n    props.onCardLike(props.card);\r\n  }\r\n\r\n  function handleMouseToggle() {\r\n    setIsHoverLikesVisible(!isHoverLikesVisible);\r\n  }\r\n\r\n  return (\r\n    <div className=\"element\">\r\n      {isOwn && <button type=\"submit\" className=\"element__trash\" onClick={handleTrashClick}></button>}\r\n      <img alt={card.name} className=\"element__picture\" src={card.link} onClick={handleClick} />\r\n      <div className=\"element__data\">\r\n        {isHoverLikesVisible && <HoverLikes likesInfo={card.likes} />}\r\n        <h3 className=\"element__place\">{card.name}</h3>\r\n\r\n        <div className=\"element__info\">\r\n          <button\r\n            type=\"submit\"\r\n            className={cardLikeButtonClassName}\r\n            onMouseEnter={handleMouseToggle}\r\n            onMouseLeave={handleMouseToggle}\r\n            onClick={handleLike}\r\n            disabled={loading}\r\n          ></button>\r\n          <p className=\"element__likes\">{card.likes.length}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default Card;\r\n","import React from 'react';\r\n\r\nexport default () => (\r\n  <div className=\"loader\">\r\n    <div></div>\r\n    <div></div>\r\n  </div>\r\n);\r\n","import React from 'react';\r\n\r\nexport const InitialLoadingContext = React.createContext();\r\n","import React from 'react';\r\nimport Card from './Card';\r\nimport Loader from './Loader';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { InitialLoadingContext } from '../contexts/InitialLoadingContext';\r\n\r\nfunction Main(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const initialLoading = React.useContext(InitialLoadingContext);\r\n\r\n  return (\r\n    <div className=\"content\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__avatar-edit\" onClick={props.onEditAvatar}>\r\n          <img src={currentUser.avatar} alt=\"фото пользователя\" className=\"profile__avatar\" />\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n          <button\r\n            type=\"button\"\r\n            aria-label=\"редактировать профиль\"\r\n            className=\"profile__edit-button\"\r\n            onClick={props.onEditProfile}\r\n          ></button>\r\n          <p className=\"profile__vocation\">{currentUser.about}</p>\r\n        </div>\r\n        <button\r\n          type=\"button\"\r\n          aria-label=\"добавить фото\"\r\n          className=\"profile__add-button\"\r\n          onClick={props.onAddPlace}\r\n        ></button>\r\n      </section>\r\n\r\n      {initialLoading && <Loader />}\r\n\r\n      <section className=\"elements\" aria-label=\"секция с фотографиями\">\r\n        {props.cards.map((card) => {\r\n          return (\r\n            <Card\r\n              card={card}\r\n              onCardClick={props.onCardClick}\r\n              key={card._id}\r\n              onTrashClick={props.onTrashClick}\r\n              onCardLike={props.onCardLike}\r\n            />\r\n          );\r\n        })}\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from 'react';\r\n\r\nfunction Authorization(props) {\r\n  return (\r\n    <div className={`auth auth_${props.name}`}>\r\n      <form\r\n        name={props.name}\r\n        action=\"#\"\r\n        method=\"POST\"\r\n        className=\"auth__container\"\r\n        noValidate\r\n        onSubmit={props.onSubmit}\r\n      >\r\n        <h2 className=\"auth__title\">{props.title}</h2>      \r\n        {props.children}\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Authorization;","import React, { useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { LoadingContext } from '../contexts/LoadingContext';\r\nimport Authorization from './Authorization';\r\n\r\nconst Login = ({onAuth}) => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [message, setMessage] = useState('');\r\n\r\nconst history = useHistory();\r\nconst loading = React.useContext(LoadingContext);\r\n\r\nfunction handleChangeEmail(evt) {\r\n  setEmail(evt.target.value);\r\n}\r\n\r\nfunction handleChangePassword(evt) {\r\n  setPassword(evt.target.value);\r\n}\r\n\r\nconst resetForm = () => {\r\n  setEmail('');\r\n  setPassword('');\r\n  setMessage('');\r\n};\r\n\r\nconst handleSubmit = (evt) => {\r\n  evt.preventDefault();  \r\n  if(!email|| !password) {    \r\n    return;\r\n  }\r\n\r\n  onAuth(password, email )\r\n  .then(()=> resetForm)\r\n  .then(() => history.push('/'))\r\n  .catch((err) => setMessage(err || 'Неудачно'));\r\n};\r\n\r\nreturn (\r\n\r\n  <Authorization \r\n  name=\"login\"\r\n  title=\"Вход\"\r\n  onSubmit={handleSubmit}>\r\n    <fieldset className=\"popup__form-item\">\r\n       <div className=\"popup__form-element\">\r\n         <input\r\n          id=\"email-input\"\r\n          type=\"email\"\r\n          name=\"email\"\r\n          className=\"popup__form-item-field popup__form-item-field_invert popup__form-item-field_email\"\r\n          placeholder=\"Email\"\r\n          value={email || ''}\r\n          onChange={handleChangeEmail}\r\n          minLength=\"4\"\r\n          maxLength=\"30\"\r\n          autoComplete=\"off\"\r\n          required\r\n        />\r\n        <span id=\"email-input-error\" className=\"popup__form-item popup__form-item_error\"></span>\r\n      </div>\r\n\r\n      <div className=\"popup__form-element\">\r\n        <input\r\n          id=\"password-input\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          className=\"popup__form-item-field popup__form-item-field_invert popup__form-item-field_password\"\r\n          placeholder=\"Пароль\"\r\n          value={password || ''}\r\n          onChange={handleChangePassword}\r\n          autoComplete=\"on\"\r\n          required\r\n        />\r\n        <span id=\"password-input-error\" className=\"popup__form-item popup__form-item_error\"></span>\r\n      </div>\r\n    </fieldset>\r\n    <button type=\"submit\" className=\"popup__save-button popup__save-button_invert\">\r\n        {loading ? `Заходим...` : `Войти`}\r\n      </button>\r\n      <div className='auth__signup'>\r\n        <p className='auth__form-item'>Ещё не зарегистрированы?</p>\r\n        <Link to='/sign-up' className='auth__form-item auth__form-item_link'>Регистрация</Link>\r\n      </div>\r\n\r\n  </Authorization>\r\n  \r\n)\r\n\r\n}\r\n\r\nexport default Login;","import React, { useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { LoadingContext } from '../contexts/LoadingContext';\r\n\r\nimport Authorization from './Authorization';\r\nimport * as auth from '../utils/auth';\r\n\r\nconst Register = (props) => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const loading = React.useContext(LoadingContext);  \r\n  const history = useHistory();  \r\n\r\n\r\n\r\n  function handleChangeEmail(evt) {\r\n    setEmail(evt.target.value);\r\n  }\r\n  \r\n  function handleChangePassword(evt) {\r\n    setPassword(evt.target.value);\r\n  }\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    \r\n    \r\n    auth.register(email, password).then((response)=> {\r\n      if (response.status !== 400) {\r\n        props.onSuccessfulRegister();        \r\n        history.push('/sign-in/');        \r\n      } else {\r\n        throw new Error ('Something went wrong');        \r\n      }\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n      props.onFailedRegister();\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Authorization \r\n  name=\"registration\"\r\n  title=\"Регистрация\"\r\n  onSubmit={handleSubmit}>\r\n    <fieldset className=\"popup__form-item\">\r\n       <div className=\"popup__form-element\">\r\n         <input\r\n          id=\"email-input\"\r\n          type=\"email\"\r\n          name=\"email\"\r\n          className=\"popup__form-item-field popup__form-item-field_invert popup__form-item-field_email\"\r\n          placeholder=\"Email\"\r\n          value={email || ''}\r\n          onChange={handleChangeEmail}\r\n          minLength=\"1\"\r\n          maxLength=\"30\"\r\n          autoComplete=\"off\"\r\n          required\r\n        />\r\n        <span id=\"email-input-error\" className=\"popup__form-item popup__form-item_error\"></span>\r\n      </div>\r\n\r\n      <div className=\"popup__form-element\">\r\n        <input\r\n          id=\"password-input\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          className=\"popup__form-item-field popup__form-item-field_invert popup__form-item-field_password\"\r\n          placeholder=\"Пароль\"\r\n          value={password || ''}\r\n          onChange={handleChangePassword}\r\n          autoComplete=\"on\"\r\n          required\r\n        />\r\n        <span id=\"password-input-error\" className=\"popup__form-item popup__form-item_error\"></span>\r\n      </div>\r\n    </fieldset>\r\n    <button type=\"submit\" className=\"popup__save-button popup__save-button_invert\">\r\n        {loading ? `Регистрация...` : `Зарегистрироваться`}\r\n      </button>\r\n      <div className='auth__signup'>\r\n        <p className='auth__form-item'>Уже зарегистрированы?</p>\r\n        <Link to='/sign-in' className='auth__form-item auth__form-item_link'>Войти\r\n        </Link>\r\n      </div>\r\n\r\n  </Authorization>\r\n  )\r\n\r\n}\r\n\r\nexport default Register;","import React from 'react';\r\n\r\nfunction PopupWithForm(props) {\r\n  return (\r\n    <div className={`popup popup_${props.name} ${props.isOpen && 'popup_opened'}`}>\r\n      <form\r\n        name={props.name}\r\n        action=\"#\"\r\n        method=\"POST\"\r\n        className=\"popup__form-container\"\r\n        noValidate\r\n        onSubmit={props.onSubmit}\r\n      >\r\n        <button type=\"button\" className=\"popup__close-button\" onClick={props.onClose}></button>\r\n        <h2 className=\"popup__title\">{props.title}</h2>\r\n        {props.children}\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { LoadingContext } from '../contexts/LoadingContext';\r\n\r\nfunction ConfirmPopup(props) {\r\n  const loading = React.useContext(LoadingContext);\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n\r\n    props.onConfirm(props.card);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"confirm\"\r\n      title=\"Вы уверены?\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <button type=\"submit\" className=\"popup__delete-button\">\r\n        {loading ? `Удаление...` : `Да`}\r\n      </button>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default ConfirmPopup;\r\n","import React from 'react';\r\n\r\nfunction PopupWithImage(props) {\r\n  return (\r\n    <div className={`popup popup__preview popup_dark-background ${props.isOpen && 'popup_opened'}`}>\r\n      <div className=\"popup__image-container\">\r\n        <button type=\"button\" className=\"popup__close-button\" onClick={props.onClose}></button>\r\n        <img className=\"popup__image\" src={props.card ? props.card.link : ''} alt={props.card ? props.card.name : ''} />\r\n        <p className=\"popup__image-caption\">{props.card.name}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithImage;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { LoadingContext } from '../contexts/LoadingContext';\r\n\r\nfunction EditProfilePopup(props) {\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const loading = React.useContext(LoadingContext);\r\n\r\n  function handleChangeName(evt) {\r\n    setName(evt.target.value);\r\n  }\r\n\r\n  function handleChangeDescription(evt) {\r\n    setDescription(evt.target.value);\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    // Запрещаем браузеру переходить по адресу формы\r\n    evt.preventDefault();\r\n\r\n    // Передаём значения управляемых компонентов во внешний обработчик\r\n    props.onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"profile\"\r\n      title=\"Редактировать профиль\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <fieldset className=\"popup__form-item\">\r\n        <div className=\"popup__form-element\">\r\n          <input\r\n            id=\"name-input\"\r\n            type=\"text\"\r\n            name=\"name\"\r\n            className=\"popup__form-item-field popup__form-item-field_name\"\r\n            placeholder=\"Имя\"\r\n            value={name || ''}\r\n            onChange={handleChangeName}\r\n            minLength=\"2\"\r\n            maxLength=\"40\"\r\n            autoComplete=\"off\"\r\n            required\r\n          />\r\n          <span id=\"name-input-error\" className=\"popup__form-item popup__form-item_error\"></span>\r\n        </div>\r\n\r\n        <div className=\"popup__form-element\">\r\n          <input\r\n            id=\"vocation-input\"\r\n            type=\"text\"\r\n            name=\"vocation\"\r\n            className=\"popup__form-item-field popup__form-item-field_vocation\"\r\n            placeholder=\"О себе\"\r\n            value={description || ''}\r\n            onChange={handleChangeDescription}\r\n            minLength=\"2\"\r\n            maxLength=\"200\"\r\n            autoComplete=\"off\"\r\n            required\r\n          />\r\n          <span id=\"vocation-input-error\" className=\"popup__form-item popup__form-item_error\"></span>\r\n        </div>\r\n      </fieldset>\r\n      <button type=\"submit\" className=\"popup__save-button\">\r\n        {loading ? `Сохранение...` : `Сохранить`}\r\n      </button>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { LoadingContext } from '../contexts/LoadingContext';\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const avatarRef = React.useRef();\r\n  const loading = React.useContext(LoadingContext);\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n\r\n    props.onUpdateAvatar({\r\n      avatar: avatarRef.current.value,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"avatar\"\r\n      title=\"Обновить аватар\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <fieldset className=\"popup__form-item\">\r\n        <div className=\"popup__form-element\">\r\n          <input\r\n            id=\"avatar-input\"\r\n            type=\"url\"\r\n            name=\"avatar\"\r\n            className=\"popup__form-item-field popup__form-item-field_avatar\"\r\n            placeholder=\"Новая ссылка\"\r\n            ref={avatarRef}\r\n            autoComplete=\"on\"\r\n            required\r\n          />\r\n          <span id=\"avatar-input-error\" className=\"popup__form-item popup__form-item_error\"></span>\r\n        </div>\r\n      </fieldset>\r\n      <button type=\"submit\" className=\"popup__save-button\">\r\n        {loading ? `Сохранение...` : `Сохранить`}\r\n      </button>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { LoadingContext } from '../contexts/LoadingContext';\r\n\r\nfunction AddPlacePopup(props) {\r\n  const [name, setName] = React.useState('');\r\n  const [link, setLink] = React.useState('');\r\n  const loading = React.useContext(LoadingContext);\r\n\r\n  function handleChangeName(evt) {\r\n    setName(evt.target.value);\r\n  }\r\n\r\n  function handleChangeLink(evt) {\r\n    setLink(evt.target.value);\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    // Передаём значения управляемых компонентов во внешний обработчик\r\n    props.onAddPlace({\r\n      name,\r\n      link,\r\n    });\r\n  }\r\n  React.useEffect(() => {\r\n    setName('');\r\n    setLink('');\r\n  }, [props.isOpen]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"place\"\r\n      title=\"Новое место\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <fieldset className=\"popup__form-item\">\r\n        <div className=\"popup__form-element\">\r\n          <input\r\n            id=\"place-input\"\r\n            type=\"text\"\r\n            name=\"name\"\r\n            className=\"popup__form-item-field popup__form-item-field_place\"\r\n            placeholder=\"Название\"\r\n            value={name || ''}\r\n            onChange={handleChangeName}\r\n            minLength=\"1\"\r\n            maxLength=\"30\"\r\n            autoComplete=\"off\"\r\n            required\r\n          />\r\n          <span id=\"place-input-error\" className=\"popup__form-item popup__form-item_error\"></span>\r\n        </div>\r\n\r\n        <div className=\"popup__form-element\">\r\n          <input\r\n            id=\"link-input\"\r\n            type=\"url\"\r\n            name=\"link\"\r\n            className=\"popup__form-item-field popup__form-item-field_link\"\r\n            placeholder=\"Ссылка\"\r\n            value={link || ''}\r\n            onChange={handleChangeLink}\r\n            autoComplete=\"on\"\r\n            required\r\n          />\r\n          <span id=\"link-input-error\" className=\"popup__form-item popup__form-item_error\"></span>\r\n        </div>\r\n      </fieldset>\r\n\r\n      <button type=\"submit\" className=\"popup__save-button\">\r\n        {loading ? `Сохранение...` : `Создать`}\r\n      </button>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\n\r\n\r\nfunction InfoTooltip(props) {\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    \r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"infoTooltip\"\r\n      title=\"\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <div className=\"popup__info\">\r\n      <img alt={props.mess.text} src={props.mess.sign} className=\"popup__sign\" />\r\n      <p className='popup__title popup__title_message'>{props.mess.text}</p>\r\n    </div>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default InfoTooltip;","class Api {\r\n  constructor({ baseUrl, headers = {} }) {\r\n    this.baseUrl = baseUrl;\r\n    this.headers = headers;\r\n  }\r\n\r\n  _handleResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      console.log('Ошибка при обработке запроса');\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    }\r\n  }\r\n\r\n  getDefaultUserInfo() {\r\n    return fetch(`${this.baseUrl}/users/me`, {\r\n      method: 'GET',\r\n      headers: this.headers,\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this.baseUrl}/cards`, {\r\n      method: 'GET',\r\n      headers: this.headers,\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  createCard(data) {\r\n    return fetch(`${this.baseUrl}/cards`, {\r\n      headers: this.headers,\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        link: data.link,\r\n      }),\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  editUser(data) {\r\n    return fetch(`${this.baseUrl}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        about: data.about,\r\n      }),\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  changeLikeCardStatus(data, isLiked) {\r\n    return fetch(`${this.baseUrl}/cards/likes/${data}`, {\r\n      method: isLiked ? 'PUT' : 'DELETE',\r\n      headers: this.headers,\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return fetch(`${this.baseUrl}/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this.headers,\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  updateAvatar(avatar) {\r\n    return fetch(`${this.baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        avatar: avatar,\r\n      }),\r\n    }).then(this._handleResponse);\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-13',\r\n  headers: {\r\n    authorization: 'f6237ee0-2461-4ab8-bf1b-c4683cc19aa7',\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\nexport default api;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport * as auth from '../utils/auth.js';\r\nimport Header from './Header';\r\nimport Footer from './Footer';\r\nimport Main from './Main';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\nimport ConfirmPopup from './ConfirmPopup';\r\nimport PopupWithImage from './PopupWithImage';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport InfoTooltip from './InfoTooltip';\r\nimport api from '../utils/Api';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { InitialLoadingContext } from '../contexts/InitialLoadingContext';\r\nimport { LoadingContext } from '../contexts/LoadingContext';\r\n\r\nimport successSign from '../images/popup_success.svg'\r\nimport failedSign from '../images/popup_fail.svg'\r\n\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\r\n  const [isConfirmPopupOpen, setIsConfirmPopupOpen] = useState(false);\r\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = useState(false);\r\n  \r\n\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [cards, setCards] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [initialLoading, setInitialLoading] = useState(true);\r\n  const [message, setMessage] = useState({sign: failedSign, text: ''});\r\n  \r\n  const [selectedCard, setSelectedCard] = useState({});\r\n\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [userData, setUserData] = useState({});\r\n\r\n  const history = useHistory();\r\n\r\n  const tokenCheck = () => {\r\n    const jwt = localStorage.getItem('jwt');\r\n    if (jwt) {\r\n      auth.getContent(jwt)\r\n        .then((res) => {\r\n          if (res) {\r\n            if (res === 401) {\r\n              localStorage.removeItem(jwt);\r\n            } else {\r\n              setLoggedIn(true);\r\n              setUserData({\r\n                email: res.data.email,\r\n              });\r\n              history.push('/');\r\n            }\r\n          }\r\n        })\r\n        .catch(() => console.log({ message: 'Токен не передан или передан не в том формате' }));\r\n    }\r\n  };\r\n \r\n  useEffect(() => tokenCheck(), []);\r\n\r\n\r\n  const onAuth = (password, email) => auth.authorize(password, email)\r\n  .then((data) => {\r\n    if (!data) {\r\n      throw new Error({ message: 'Токен не передан или передан не в том формате' });\r\n    } else {\r\n      tokenCheck();\r\n    }\r\n  }).catch((err) => console.log(err));\r\n\r\n  function onSignOut() {\r\n    setLoggedIn(false);\r\n  }\r\n\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    setSelectedCard(card);\r\n    setIsImagePopupOpen(true);\r\n  }\r\n\r\n  function handleTrashClick(card) {\r\n    setSelectedCard(card);\r\n    setIsConfirmPopupOpen(true);\r\n  }\r\n\r\n  function handleConfirmSubmit(card) {\r\n    setLoading(true);\r\n    api\r\n      .deleteCard(card._id)\r\n      .then(() => {\r\n        setCards(\r\n          cards.filter((item) => {\r\n            return item._id !== card._id;\r\n          })\r\n        );\r\n      })\r\n      .finally(() => {\r\n        closeAllPopups();\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  function handleUpdateUser(user) {\r\n    setLoading(true);\r\n    api\r\n      .editUser(user)\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n      })\r\n      .finally(() => {\r\n        closeAllPopups();\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  function handleUpdateAvatar(avatar) {\r\n    setLoading(true);\r\n    api\r\n      .updateAvatar(avatar.avatar)\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n      })\r\n      .finally(() => {\r\n        closeAllPopups();\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  function handleAddPlaceSubmit(data) {\r\n    setLoading(true);\r\n    api\r\n      .createCard(data)\r\n      .then((newCard) => {\r\n        setCards([...cards, newCard]);\r\n      })\r\n      .finally(() => {\r\n        closeAllPopups();\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  function handleSucessfulRegister () {\r\n    setMessage( {sign: successSign, text: 'Вы успешно зарегистрировались!'});\r\n    setIsInfoTooltipOpen(true);\r\n  }\r\n\r\n  function handleFailedRegister () {\r\n    setMessage( {sign: failedSign, text: 'Что-то пошло не так! Попробуйте ещё раз.'});\r\n    setIsInfoTooltipOpen(true);\r\n  }\r\n\r\n  \r\n  function closeAllPopups() {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsImagePopupOpen(false);\r\n    setIsConfirmPopupOpen(false);\r\n    setIsInfoTooltipOpen(false);\r\n    setSelectedCard({});\r\n    \r\n  }\r\n\r\n  React.useEffect(() => {\r\n    Promise.all([api.getDefaultUserInfo(), api.getInitialCards()])\r\n      .then((data) => {\r\n        setCurrentUser(data[0]);\r\n        setCards(data[1]);\r\n      })\r\n      .finally(() => {\r\n        setInitialLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, []);\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\r\n    setLoading(true);\r\n    api\r\n      .changeLikeCardStatus(card._id, !isLiked)\r\n      .then((newCard) => {\r\n        const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\r\n        setCards(newCards);\r\n      })\r\n      .finally(() => {\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    function handleEscClose(evt) {\r\n      if (evt.key === 'Escape') {\r\n        closeAllPopups();\r\n      }\r\n    }\r\n\r\n    function closeByOverlayClick(evt) {\r\n      if (evt.target.classList.contains('popup_opened')) {\r\n        closeAllPopups();\r\n      }\r\n    }\r\n\r\n    document.addEventListener('keydown', handleEscClose);\r\n    document.addEventListener('click', closeByOverlayClick);\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscClose);\r\n      document.removeEventListener('click', closeByOverlayClick);\r\n    };\r\n  });\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <InitialLoadingContext.Provider value={initialLoading}>\r\n        <LoadingContext.Provider value={loading}>\r\n          \r\n          <CurrentUserContext.Provider value={currentUser}>\r\n            <Header onSignOut={onSignOut} email={userData.email} loggedIn={loggedIn} >             \r\n            </Header>\r\n\r\n              <Switch>\r\n                <ProtectedRoute exact path='/' loggedIn={loggedIn} component={Main} onEditAvatar={handleEditAvatarClick}\r\n                  onEditProfile={handleEditProfileClick}\r\n                  onAddPlace={handleAddPlaceClick}\r\n                  onCardClick={handleCardClick}\r\n                  onTrashClick={handleTrashClick}\r\n                  onCardLike={handleCardLike}\r\n                  cards={cards}/>\r\n\r\n                <Route path='/sign-in' >\r\n                  <Login onAuth={onAuth}/>\r\n                </Route>\r\n\r\n                <Route path='/sign-up' >\r\n                  <Register onSuccessfulRegister = {handleSucessfulRegister} onFailedRegister = {handleFailedRegister}/>\r\n                </Route> \r\n\r\n                <Route>\r\n                  {loggedIn ? <Redirect to='/' /> : <Redirect to='/sign-in' />}\r\n                </Route>\r\n\r\n              </Switch>\r\n\r\n            <Footer />\r\n            \r\n\r\n\r\n            <section className=\"popups\">\r\n              <EditAvatarPopup\r\n                isOpen={isEditAvatarPopupOpen}\r\n                onClose={closeAllPopups}\r\n                onUpdateAvatar={handleUpdateAvatar}\r\n              />\r\n\r\n              <EditProfilePopup\r\n                isOpen={isEditProfilePopupOpen}\r\n                onClose={closeAllPopups}\r\n                onUpdateUser={handleUpdateUser}\r\n              />\r\n\r\n              <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit} />\r\n\r\n              <ConfirmPopup\r\n                isOpen={isConfirmPopupOpen}\r\n                onClose={closeAllPopups}\r\n                card={selectedCard}\r\n                onConfirm={handleConfirmSubmit}\r\n              />\r\n\r\n              <InfoTooltip\r\n              isOpen={isInfoTooltipOpen}\r\n              onClose={closeAllPopups}\r\n              mess = {message}/>\r\n\r\n              <PopupWithImage isOpen={isImagePopupOpen} card={selectedCard} onClose={closeAllPopups} />\r\n            </section>\r\n          </CurrentUserContext.Provider>\r\n          \r\n        </LoadingContext.Provider>\r\n      </InitialLoadingContext.Provider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}